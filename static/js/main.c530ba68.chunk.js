(this["webpackJsonpbraindump-app"]=this["webpackJsonpbraindump-app"]||[]).push([[0],{100:function(e,n,t){},114:function(e,n,t){"use strict";t.r(n);var r=t(0),c=t(11),i=t.n(c),a=(t(100),t(31)),u=t(14),o=t(10),s=t(16),l=t(53),d=t(170),j=t(76),m="ADD_DUMP",b="SET_DUMP",p="REMOVE_DUMP",f=function(){var e=localStorage.getItem("dumps");return null===e?[]:JSON.parse(e).dumps}(),h=t(25),O=Object(d.c)(Object(d.b)({dumps:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,n=arguments.length>1?arguments[1]:void 0,t=function(e,n){return[].concat(Object(o.a)(e),[n])},r=function(e,t){var r=e.findIndex((function(e){return e.id===t.id}));if(r<0)return e;var c=Object(o.a)(e);return c[r]=n.dump,c},c=function(e,n){return e.filter((function(e){return e.id!==n.id}))};switch(n.type){case m:return t(e,n.dump);case b:return r(e,n.dump);case p:return c(e,n.dump)}return e}}),Object(d.a)(j.a)),v=h.c;function x(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return Object.keys(n.map((function(e){return e.replace("'","")})).map((function(e){return e.toLowerCase()})).flatMap((function(e){return e.split(/[^a-z0-9]/)})).filter((function(e){return e.length>0})).reduce((function(e,n){return e[n]=!0,e}),{}))}var g,y=t(32),S=t(171),E=t(147),C=t(151),D=t(172),k=t(152),w=t(153),F=t(154),I=t(155),N=t(156),L=t(158),M=t(33),J=t(150),P=t(157),T=t(4),z=Object(S.a)(Object(M.a)((function(e){var n=Object(T.jsx)(E.a,{position:"end",children:Object(T.jsx)(J.a,{})}),t=Object(T.jsxs)(C.a,{children:[Object(T.jsx)(D.a,{htmlFor:"search",children:"Search"}),Object(T.jsx)(k.a,{id:"search",autoFocus:!0,onChange:function(n){e.onSearchFilterChange(n.target.value)},endAdornment:n,autoComplete:"off"})]}),r=e.dumps.map((function(n){return Object(T.jsxs)(w.a,{button:!0,onClick:function(){return e.onDumpSelection(n)},children:[Object(T.jsx)(F.a,{primary:n.summary,secondary:new Date(n.timestamp).toLocaleString()}),Object(T.jsx)(I.a,{onClick:function(){return e.onDumpRemoval(n)},children:Object(T.jsx)(N.a,{edge:"end","aria-label":"delete",children:Object(T.jsx)(P.a,{})})})]},n.id)}));return Object(T.jsxs)(T.Fragment,{children:[t,e.dumps.length>0?Object(T.jsx)(L.a,{children:r}):null]})}))(g||(g=Object(y.a)([""]))));function A(){var e=Object(r.useState)({filter:"",selected:null}),n=Object(l.a)(e,2),t=n[0],c=n[1],i=Object(u.f)(),a=v((function(e){var n=e.dumps.map((function(e){return function(e,n){var t=x.apply(void 0,[e.summary,e.description].concat(Object(o.a)(e.tags))),r=x(n);return function(e,n){var t=e.join(";");return n.filter((function(e){return t.includes(e)})).length}(t,r)}(e,t.filter)}));return function(e,n){var t=Math.max.apply(Math,Object(o.a)(n));if(0===t)return[];return n.map((function(e,n){return e===t?n:-1})).filter((function(e){return e>=0})).map((function(n){return e[n]}))}(e.dumps,n)})),d=Object(h.b)();return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("h2",{children:"Find dumps"}),Object(T.jsx)(z,{dumps:a,onSearchFilterChange:function(e){c((function(n){return Object(s.a)(Object(s.a)({},n),{},{filter:e})}))},onDumpSelection:function(e){i.push("/show/dumps/".concat(e.id))},onDumpRemoval:function(e){d(function(e){var n={type:p,dump:e};return function(e,t){e(n);var r=t();localStorage.setItem("dumps",JSON.stringify(r))}}(e))}})]})}var B=t(164),R=t(165),U=t(166),_=t(168),V=t(7),K=t(167),W=t(159);var q=t(169);var G=t(160),H=t(23),Q=t(64);function X(e){return"e"===e.key}function Y(e){return e.ctrlKey&&"s"===e.key}function Z(e){return"Escape"===e.key}var $,ee=function(){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];Object(H.a)(this,e),this.handlers=n}return Object(Q.a)(e,[{key:"onEdit",value:function(e){return this.handlers.push({matcher:X,action:e}),this}},{key:"onSave",value:function(e){return this.handlers.push({matcher:Y,action:e}),this}},{key:"onCancel",value:function(e){return this.handlers.push({matcher:Z,action:e}),this}},{key:"build",value:function(){var e=this;return function(n){var t=e.handlers.filter((function(e){return e.matcher(n)}));1===t.length&&(t[0].action(),n.preventDefault())}}}]),e}(),ne=Object(S.a)(Object(M.a)((function(e){var n,t,c={currentDump:e.dump||null,summary:{value:(null===(n=e.dump)||void 0===n?void 0:n.summary)||null,hasError:!1,error:null},description:{value:(null===(t=e.dump)||void 0===t?void 0:t.description)||null,hasError:!1,error:null}},i=Object(r.useState)(c),a=Object(l.a)(i,2),u=a[0],o=a[1],d=Object(r.useState)(!1),j=Object(l.a)(d,2),m=j[0],b=j[1],p=function(e,n){var t=function(e){return 0===e.trim().length}(n),r=t?"Field must not be empty":null;o((function(c){return Object(s.a)(Object(s.a)({},c),{},Object(V.a)({},e,{value:n,hasError:t,error:r}))}))},f=function(){var n,t,r,c=(null===(n=u.currentDump)||void 0===n?void 0:n.id)||null,i=(null===(t=u.summary)||void 0===t?void 0:t.value)||"",a=(null===(r=u.description)||void 0===r?void 0:r.value)||"";if(m){var l=function(e,n,t){return{id:e||Object(q.a)(),timestamp:Date.now(),summary:n.trim(),description:t,tags:[]}}(c,i,a);e.onSave(l),o((function(e){return Object(s.a)(Object(s.a)({},e),{},{summary:Object(s.a)(Object(s.a)({},e.summary),{},{value:l.summary}),description:Object(s.a)(Object(s.a)({},e.description),{},{value:l.description}),currentDump:l})}))}},h=(new ee).onSave(f).onCancel((function(){e.onCancel()})).build(),O=function(e){h(e)};return Object(r.useEffect)((function(){return document.addEventListener("keydown",O),function(){document.removeEventListener("keydown",O)}})),Object(r.useEffect)((function(){var e,n,t,r=null!==u.summary.value&&!u.summary.hasError,c=null!==u.description.value&&!u.description.hasError,i=(null===(e=u.summary.value)||void 0===e?void 0:e.trim())!==(null===(n=u.currentDump)||void 0===n?void 0:n.summary),a=u.description.value!==(null===(t=u.currentDump)||void 0===t?void 0:t.description);b(r&&c&&(i||a))}),[u]),Object(T.jsx)(T.Fragment,{children:Object(T.jsxs)("form",{className:e.className,noValidate:!0,autoComplete:"off",onSubmit:function(e){e.preventDefault()},children:[Object(T.jsx)("div",{children:Object(T.jsx)(K.a,{id:"summary",label:"Summary",variant:"outlined",value:u.summary.value||"",autoFocus:!0,onChange:function(e){return p("summary",e.target.value)},error:u.summary.hasError,helperText:u.summary.error})}),Object(T.jsx)("div",{children:Object(T.jsx)(K.a,{id:"description",label:"Description",variant:"outlined",value:u.description.value||"",multiline:!0,rows:12,onChange:function(e){return p("description",e.target.value)},error:u.description.hasError,helperText:u.description.error})}),Object(T.jsx)("div",{children:Object(T.jsx)(W.a,{disabled:!m,onClick:f,variant:"contained",color:"primary",size:"large",startIcon:Object(T.jsx)(G.a,{}),children:"Save"})})]})})}))($||($=Object(y.a)(["\n  div {\n    width: 100%;\n  }\n\n  > div {\n    margin: ",";\n  }\n\n  > div:last-child {\n    text-align: right;\n  }\n"])),(function(e){return e.theme.spacing(2,0,2)})));function te(){var e=Object(u.f)(),n=Object(h.b)();return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("h2",{children:"Create new dump"}),Object(T.jsx)(ne,{onSave:function(t){n(function(e){var n={type:m,dump:e};return function(e,t){e(n);var r=t();localStorage.setItem("dumps",JSON.stringify(r))}}(t)),e.push("/")},onCancel:function(){e.push("/")}})]})}var re,ce=t(161),ie=t(89),ae=Object(S.a)(Object(M.a)((function(e){var n=(new ee).onEdit(e.onEdit).build(),t=function(e){n(e)};return Object(r.useEffect)((function(){return document.addEventListener("keydown",t),function(){document.removeEventListener("keydown",t)}})),Object(T.jsxs)("div",{className:e.className,children:[Object(T.jsx)("h2",{children:e.dump.summary}),Object(T.jsx)(ie.a,{children:e.dump.description}),Object(T.jsx)("div",{children:Object(T.jsx)(W.a,{onClick:e.onEdit,variant:"contained",color:"primary",size:"large",startIcon:Object(T.jsx)(ce.a,{}),children:"Edit"})})]})}))(re||(re=Object(y.a)(["\n  > div:last-child {\n    text-align: right;\n  }\n"]))));function ue(){var e=Object(u.f)(),n=Object(u.g)(),t=v((function(e){return e.dumps.filter((function(e){return e.id===n.dumpId}))}));return Object(T.jsx)(T.Fragment,{children:1===t.length?Object(T.jsx)(ae,{dump:t[0],onEdit:function(){1===t.length&&e.push("/edit/dumps/".concat(t[0].id))}}):null})}var oe,se=t(162),le=t(163),de=Object(S.a)(Object(M.a)((function(e){var n=e.onClick||function(){};return Object(T.jsx)(se.a,{className:e.className,color:"primary","aria-label":"add",onClick:n,children:Object(T.jsx)(le.a,{})})}))(oe||(oe=Object(y.a)(["\n  position: fixed;\n  top: auto;\n  bottom: ","px;\n  left: auto;\n  right: 30px;\n"])),(function(e){return 30+70*(e.index||0)})));function je(){var e=Object(u.f)(),n=Object(u.g)(),t=v((function(e){return e.dumps.filter((function(e){return e.id===n.dumpId}))})),r=Object(h.b)();return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("h2",{children:"Edit Dump"}),1===t.length?Object(T.jsx)(ne,{onSave:function(e){r(function(e){var n={type:b,dump:e};return function(e,t){e(n);var r=t();localStorage.setItem("dumps",JSON.stringify(r))}}(e))},onCancel:function(){e.push("/")},dump:t[0]}):null]})}function me(){return e=Object(T.jsx)(B.a,{maxWidth:"sm",children:Object(T.jsxs)(a.a,{basename:"/braindump-app",children:[Object(T.jsx)(R.a,{color:"inherit",component:a.b,to:"/",children:Object(T.jsx)("h1",{children:"Braindump"})}),Object(T.jsx)(a.b,{to:"/create",children:Object(T.jsx)(de,{})}),Object(T.jsxs)(u.c,{children:[Object(T.jsx)(u.a,{path:"/create",children:Object(T.jsx)(te,{})}),Object(T.jsx)(u.a,{path:"/edit/dumps/:dumpId",children:Object(T.jsx)(je,{})}),Object(T.jsx)(u.a,{path:"/show/dumps/:dumpId",children:Object(T.jsx)(ue,{})}),Object(T.jsx)(u.a,{path:"/",children:Object(T.jsx)(A,{})})]})]})}),Object(T.jsxs)(r.StrictMode,{children:[Object(T.jsx)(U.a,{}),Object(T.jsx)(_.b,{injectFirst:!0,children:Object(T.jsx)(h.a,{store:O,children:e})})]});var e}var be;i.a.render(Object(T.jsx)(me,{}),document.getElementById("root")),be&&t.e(3).then(t.bind(null,174)).then((function(e){var n=e.getCLS,t=e.getFID,r=e.getFCP,c=e.getLCP,i=e.getTTFB;n(be),t(be),r(be),c(be),i(be)}))}},[[114,1,2]]]);
//# sourceMappingURL=main.c530ba68.chunk.js.map