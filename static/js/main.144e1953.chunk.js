(this["webpackJsonpbraindump-app"]=this["webpackJsonpbraindump-app"]||[]).push([[0],{103:function(e,n,t){},117:function(e,n,t){"use strict";t.r(n);var r=t(0),c=t(11),i=t.n(c),a=(t(103),t(39)),u=t(14),o=t(10),s=t(17),l=t(42),d=t(178),j=t(76),m="ADD_DUMP",b="SET_DUMP",p="REMOVE_DUMP",f=function(){var e=localStorage.getItem("dumps");return null===e?[]:JSON.parse(e).dumps}(),h=t(26),O=Object(d.c)(Object(d.b)({dumps:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,n=arguments.length>1?arguments[1]:void 0,t=function(e,n){return[].concat(Object(o.a)(e),[n])},r=function(e,t){var r=e.findIndex((function(e){return e.id===t.id}));if(r<0)return e;var c=Object(o.a)(e);return c[r]=n.dump,c},c=function(e,n){return e.filter((function(e){return e.id!==n.id}))};switch(n.type){case m:return t(e,n.dump);case b:return r(e,n.dump);case p:return c(e,n.dump)}return e}}),Object(d.a)(j.a)),v=h.c;function x(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return Object.keys(n.map((function(e){return e.replace("'","")})).map((function(e){return e.toLowerCase()})).flatMap((function(e){return e.split(/[^a-z0-9]/)})).filter((function(e){return e.length>0})).reduce((function(e,n){return e[n]=!0,e}),{}))}var g,y=t(27),S=t(179),E=t(153),C=t(157),k=t(180),D=t(158),w=t(118),F=t(159),I=t(160),N=t(161),M=t(163),L=t(28),T=t(156),J=t(162),P=t(3),A=Object(S.a)(Object(L.a)((function(e){var n=Object(P.jsx)(E.a,{position:"end",children:Object(P.jsx)(T.a,{})}),t=Object(P.jsxs)(C.a,{children:[Object(P.jsx)(k.a,{htmlFor:"search",children:"Search"}),Object(P.jsx)(D.a,{id:"search",autoFocus:!0,onChange:function(n){e.onSearchFilterChange(n.target.value)},endAdornment:n,autoComplete:"off"})]}),r=e.dumps.map((function(n){return Object(P.jsxs)(w.a,{button:!0,onClick:function(){return e.onDumpSelection(n)},children:[Object(P.jsx)(F.a,{primary:n.summary,secondary:new Date(n.timestamp).toLocaleString()}),Object(P.jsx)(I.a,{onClick:function(){return e.onDumpRemoval(n)},children:Object(P.jsx)(N.a,{edge:"end","aria-label":"delete",children:Object(P.jsx)(J.a,{})})})]},n.id)}));return Object(P.jsxs)(P.Fragment,{children:[t,e.dumps.length>0?Object(P.jsx)(M.a,{children:r}):null]})}))(g||(g=Object(y.a)([""]))));function z(){var e=Object(r.useState)({filter:"",selected:null}),n=Object(l.a)(e,2),t=n[0],c=n[1],i=Object(u.f)(),a=v((function(e){var n=e.dumps.map((function(e){return function(e,n){var t=x.apply(void 0,[e.summary,e.description].concat(Object(o.a)(e.tags))),r=x(n);return function(e,n){var t=e.join(";");return n.filter((function(e){return t.includes(e)})).length}(t,r)}(e,t.filter)}));return function(e,n){var t=Math.max.apply(Math,Object(o.a)(n));if(0===t)return[];return n.map((function(e,n){return e===t?n:-1})).filter((function(e){return e>=0})).map((function(n){return e[n]}))}(e.dumps,n)})),d=Object(h.b)();return Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)("h2",{children:"Find dumps"}),Object(P.jsx)(A,{dumps:a,onSearchFilterChange:function(e){c((function(n){return Object(s.a)(Object(s.a)({},n),{},{filter:e})}))},onDumpSelection:function(e){i.push("/show/dumps/".concat(e.id))},onDumpRemoval:function(e){d(function(e){var n={type:p,dump:e};return function(e,t){e(n);var r=t();localStorage.setItem("dumps",JSON.stringify(r))}}(e))}})]})}var B=t(173),R=t(174),U=t(175),_=t(7),V=t(176),K=t(164);var W=t(177);var q=t(165),G=t(24),H=t(66);function Q(e){return"e"===e.key}function X(e){return e.ctrlKey&&"s"===e.key}function Y(e){return"Escape"===e.key}var Z,$=function(){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];Object(G.a)(this,e),this.handlers=n}return Object(H.a)(e,[{key:"onEdit",value:function(e){return this.handlers.push({matcher:Q,action:e}),this}},{key:"onSave",value:function(e){return this.handlers.push({matcher:X,action:e}),this}},{key:"onCancel",value:function(e){return this.handlers.push({matcher:Y,action:e}),this}},{key:"build",value:function(){var e=this;return function(n){var t=e.handlers.filter((function(e){return e.matcher(n)}));1===t.length&&(t[0].action(),n.preventDefault())}}}]),e}(),ee=Object(S.a)(Object(L.a)((function(e){var n,t,c={currentDump:e.dump||null,summary:{value:(null===(n=e.dump)||void 0===n?void 0:n.summary)||null,hasError:!1,error:null},description:{value:(null===(t=e.dump)||void 0===t?void 0:t.description)||null,hasError:!1,error:null}},i=Object(r.useState)(c),a=Object(l.a)(i,2),u=a[0],o=a[1],d=Object(r.useState)(!1),j=Object(l.a)(d,2),m=j[0],b=j[1],p=function(e,n){var t=function(e){return 0===e.trim().length}(n),r=t?"Field must not be empty":null;o((function(c){return Object(s.a)(Object(s.a)({},c),{},Object(_.a)({},e,{value:n,hasError:t,error:r}))}))},f=function(){var n,t,r,c=(null===(n=u.currentDump)||void 0===n?void 0:n.id)||null,i=(null===(t=u.summary)||void 0===t?void 0:t.value)||"",a=(null===(r=u.description)||void 0===r?void 0:r.value)||"";if(m){var l=function(e,n,t){return{id:e||Object(W.a)(),timestamp:Date.now(),summary:n.trim(),description:t,tags:[]}}(c,i,a);e.onSave(l),o((function(e){return Object(s.a)(Object(s.a)({},e),{},{summary:Object(s.a)(Object(s.a)({},e.summary),{},{value:l.summary}),description:Object(s.a)(Object(s.a)({},e.description),{},{value:l.description}),currentDump:l})}))}},h=(new $).onSave(f).onCancel((function(){e.onCancel()})).build(),O=function(e){h(e)};return Object(r.useEffect)((function(){return document.addEventListener("keydown",O),function(){document.removeEventListener("keydown",O)}})),Object(r.useEffect)((function(){var e,n,t,r=null!==u.summary.value&&!u.summary.hasError,c=null!==u.description.value&&!u.description.hasError,i=(null===(e=u.summary.value)||void 0===e?void 0:e.trim())!==(null===(n=u.currentDump)||void 0===n?void 0:n.summary),a=u.description.value!==(null===(t=u.currentDump)||void 0===t?void 0:t.description);b(r&&c&&(i||a))}),[u]),Object(P.jsx)(P.Fragment,{children:Object(P.jsxs)("form",{className:e.className,noValidate:!0,autoComplete:"off",onSubmit:function(e){e.preventDefault()},children:[Object(P.jsx)("div",{children:Object(P.jsx)(V.a,{id:"summary",label:"Summary",variant:"outlined",value:u.summary.value||"",autoFocus:!0,onChange:function(e){return p("summary",e.target.value)},error:u.summary.hasError,helperText:u.summary.error})}),Object(P.jsx)("div",{children:Object(P.jsx)(V.a,{id:"description",label:"Description",variant:"outlined",value:u.description.value||"",multiline:!0,rows:12,onChange:function(e){return p("description",e.target.value)},error:u.description.hasError,helperText:u.description.error})}),Object(P.jsx)("div",{children:Object(P.jsx)(K.a,{disabled:!m,onClick:f,variant:"contained",color:"primary",size:"large",startIcon:Object(P.jsx)(q.a,{}),children:"Save"})})]})})}))(Z||(Z=Object(y.a)(["\n  div {\n    width: 100%;\n  }\n\n  > div {\n    margin: ",";\n  }\n\n  > div:last-child {\n    text-align: right;\n  }\n\n  > div > div > div > TextArea {\n    font-family: monospace;\n  }\n"])),(function(e){return e.theme.spacing(2,0,2)})));function ne(){var e=Object(u.f)(),n=Object(h.b)();return Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)("h2",{children:"Create new dump"}),Object(P.jsx)(ee,{onSave:function(t){n(function(e){var n={type:m,dump:e};return function(e,t){e(n);var r=t();localStorage.setItem("dumps",JSON.stringify(r))}}(t)),e.push("/edit/dumps/".concat(t.id))},onCancel:function(){e.push("/")}})]})}var te,re=t(166),ce=t(89),ie=Object(S.a)(Object(L.a)((function(e){var n=(new $).onEdit(e.onEdit).build(),t=function(e){n(e)};return Object(r.useEffect)((function(){return document.addEventListener("keydown",t),function(){document.removeEventListener("keydown",t)}})),Object(P.jsxs)("div",{className:e.className,children:[Object(P.jsx)("h2",{children:e.dump.summary}),Object(P.jsx)(ce.a,{children:e.dump.description}),Object(P.jsx)("div",{children:Object(P.jsx)(K.a,{onClick:e.onEdit,variant:"contained",color:"primary",size:"large",startIcon:Object(P.jsx)(re.a,{}),children:"Edit"})})]})}))(te||(te=Object(y.a)(["\n  > div:last-child {\n    text-align: right;\n  }\n"]))));function ae(){var e=Object(u.f)(),n=Object(u.g)(),t=v((function(e){return e.dumps.filter((function(e){return e.id===n.dumpId}))}));return Object(P.jsx)(P.Fragment,{children:1===t.length?Object(P.jsx)(ie,{dump:t[0],onEdit:function(){1===t.length&&e.push("/edit/dumps/".concat(t[0].id))}}):null})}var ue,oe=t(167),se=t(168),le=Object(S.a)(Object(L.a)((function(e){var n=e.onClick||function(){};return Object(P.jsx)(oe.a,{className:e.className,color:"primary","aria-label":"add",onClick:n,children:Object(P.jsx)(se.a,{})})}))(ue||(ue=Object(y.a)(["\n  position: fixed;\n  top: auto;\n  bottom: ","px;\n  left: auto;\n  right: 30px;\n"])),(function(e){return 30+70*(e.index||0)})));function de(){var e=Object(u.f)(),n=Object(u.g)(),t=v((function(e){return e.dumps.filter((function(e){return e.id===n.dumpId}))})),r=Object(h.b)();return Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)("h2",{children:"Edit Dump"}),1===t.length?Object(P.jsx)(ee,{onSave:function(e){r(function(e){var n={type:b,dump:e};return function(e,t){e(n);var r=t();localStorage.setItem("dumps",JSON.stringify(r))}}(e))},onCancel:function(){e.push("/")},dump:t[0]}):null]})}var je,me=t(169),be=t(170),pe=t(171),fe=t(90),he=t(57),Oe=t(172),ve=Object(S.a)(Object(L.a)((function(e){var n=Object(r.useState)(null),t=Object(l.a)(n,2),c=t[0],i=t[1],a=function(){i(null)},u=e.actions.map((function(e,n){return Object(P.jsx)(me.a,{onClick:function(){return(0,e.action)(),void a()},children:e.title},"menu-item-".concat(n))}));return Object(P.jsx)(be.a,{className:e.className,position:"static",children:Object(P.jsxs)(pe.a,{children:[Object(P.jsx)(N.a,{onClick:function(e){i(e.currentTarget)},edge:"start",color:"inherit","aria-label":"menu",children:Object(P.jsx)(Oe.a,{})}),u.length>0?Object(P.jsx)(fe.a,{id:"app-menu",anchorEl:c,keepMounted:!0,open:!!c,onClose:a,children:u}):null,Object(P.jsx)(he.a,{variant:"h6",children:e.title})]})})}))(je||(je=Object(y.a)(["\n  flex-grow: 1;\n\n  & > div > button:first-child {\n    margin-right: ",";\n  }\n\n  & > div > h6 {\n    flex-grow: 1;\n  }\n"])),(function(e){return e.theme.spacing(2)})));function xe(){return e=Object(P.jsx)(B.a,{maxWidth:"sm",children:Object(P.jsxs)(a.a,{basename:"/braindump-app",children:[Object(P.jsx)(ve,{title:"Braindump",actions:[]}),Object(P.jsx)(a.b,{to:"/create",children:Object(P.jsx)(le,{})}),Object(P.jsxs)(u.c,{children:[Object(P.jsx)(u.a,{path:"/create",children:Object(P.jsx)(ne,{})}),Object(P.jsx)(u.a,{path:"/edit/dumps/:dumpId",children:Object(P.jsx)(de,{})}),Object(P.jsx)(u.a,{path:"/show/dumps/:dumpId",children:Object(P.jsx)(ae,{})}),Object(P.jsx)(u.a,{path:"/",children:Object(P.jsx)(z,{})})]})]})}),Object(P.jsxs)(r.StrictMode,{children:[Object(P.jsx)(R.a,{}),Object(P.jsx)(U.b,{injectFirst:!0,children:Object(P.jsx)(h.a,{store:O,children:e})})]});var e}var ge;i.a.render(Object(P.jsx)(xe,{}),document.getElementById("root")),ge&&t.e(3).then(t.bind(null,181)).then((function(e){var n=e.getCLS,t=e.getFID,r=e.getFCP,c=e.getLCP,i=e.getTTFB;n(ge),t(ge),r(ge),c(ge),i(ge)}))}},[[117,1,2]]]);
//# sourceMappingURL=main.144e1953.chunk.js.map