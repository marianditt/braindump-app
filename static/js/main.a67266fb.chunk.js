(this["webpackJsonpbraindump-app"]=this["webpackJsonpbraindump-app"]||[]).push([[0],{100:function(e,t,n){},114:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(11),i=n.n(c),a=(n(100),n(31)),u=n(14),o=n(10),s=n(16),l=n(53),d=n(170),j=n(76),m="ADD_DUMP",b="SET_DUMP",p="REMOVE_DUMP",f=function(){var e=localStorage.getItem("dumps");return null===e?[]:JSON.parse(e).dumps}(),h=n(25),O=Object(d.c)(Object(d.b)({dumps:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0,n=function(e,t){return[].concat(Object(o.a)(e),[t])},r=function(e,n){var r=e.findIndex((function(e){return e.id===n.id}));if(r<0)return e;var c=Object(o.a)(e);return c[r]=t.dump,c},c=function(e,t){return e.filter((function(e){return e.id!==t.id}))};switch(t.type){case m:return n(e,t.dump);case b:return r(e,t.dump);case p:return c(e,t.dump)}return e}}),Object(d.a)(j.a)),v=h.c;function x(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object.keys(t.map((function(e){return e.replace("'","")})).map((function(e){return e.toLowerCase()})).flatMap((function(e){return e.split(/[^a-z0-9]/)})).filter((function(e){return e.length>0})).reduce((function(e,t){return e[t]=!0,e}),{}))}var g,y=n(32),S=n(171),E=n(147),C=n(151),D=n(172),k=n(152),w=n(153),F=n(154),I=n(155),N=n(156),L=n(158),M=n(33),J=n(150),P=n(157),T=n(4),z=Object(S.a)(Object(M.a)((function(e){var t=Object(T.jsx)(E.a,{position:"end",children:Object(T.jsx)(J.a,{})}),n=Object(T.jsxs)(C.a,{children:[Object(T.jsx)(D.a,{htmlFor:"search",children:"Search"}),Object(T.jsx)(k.a,{id:"search",autoFocus:!0,onChange:function(t){e.onSearchFilterChange(t.target.value)},endAdornment:t,autoComplete:"off"})]}),r=e.dumps.map((function(t){return Object(T.jsxs)(w.a,{button:!0,onClick:function(){return e.onDumpSelection(t)},children:[Object(T.jsx)(F.a,{primary:t.summary,secondary:new Date(t.timestamp).toLocaleString()}),Object(T.jsx)(I.a,{onClick:function(){return e.onDumpRemoval(t)},children:Object(T.jsx)(N.a,{edge:"end","aria-label":"delete",children:Object(T.jsx)(P.a,{})})})]},t.id)}));return Object(T.jsxs)(T.Fragment,{children:[n,e.dumps.length>0?Object(T.jsx)(L.a,{children:r}):null]})}))(g||(g=Object(y.a)([""]))));function A(){var e=Object(r.useState)({filter:"",selected:null}),t=Object(l.a)(e,2),n=t[0],c=t[1],i=Object(u.f)(),a=v((function(e){var t=e.dumps.map((function(e){return function(e,t){var n=x.apply(void 0,[e.summary,e.description].concat(Object(o.a)(e.tags))),r=x(t);return function(e,t){var n=e.join(";");return t.filter((function(e){return n.includes(e)})).length}(n,r)}(e,n.filter)}));return function(e,t){var n=Math.max.apply(Math,Object(o.a)(t));if(0===n)return[];return t.map((function(e,t){return e===n?t:-1})).filter((function(e){return e>=0})).map((function(t){return e[t]}))}(e.dumps,t)})),d=Object(h.b)();return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("h2",{children:"Find dumps"}),Object(T.jsx)(z,{dumps:a,onSearchFilterChange:function(e){c((function(t){return Object(s.a)(Object(s.a)({},t),{},{filter:e})}))},onDumpSelection:function(e){i.push("/show/dumps/".concat(e.id))},onDumpRemoval:function(e){d(function(e){var t={type:p,dump:e};return function(e,n){e(t);var r=n();localStorage.setItem("dumps",JSON.stringify(r))}}(e))}})]})}var B=n(164),R=n(165),U=n(166),_=n(168),V=n(7),K=n(167),W=n(159);var q=n(169);var G=n(160),H=n(23),Q=n(64);function X(e){return"e"===e.key}function Y(e){return e.ctrlKey&&"s"===e.key}function Z(e){return"Escape"===e.key}var $,ee=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];Object(H.a)(this,e),this.handlers=t}return Object(Q.a)(e,[{key:"onEdit",value:function(e){return this.handlers.push({matcher:X,action:e}),this}},{key:"onSave",value:function(e){return this.handlers.push({matcher:Y,action:e}),this}},{key:"onCancel",value:function(e){return this.handlers.push({matcher:Z,action:e}),this}},{key:"build",value:function(){var e=this;return function(t){var n=e.handlers.filter((function(e){return e.matcher(t)}));1===n.length&&(n[0].action(),t.preventDefault())}}}]),e}(),te=Object(S.a)(Object(M.a)((function(e){var t,n,c={currentDump:e.dump||null,summary:{value:(null===(t=e.dump)||void 0===t?void 0:t.summary)||null,hasError:!1,error:null},description:{value:(null===(n=e.dump)||void 0===n?void 0:n.description)||null,hasError:!1,error:null}},i=Object(r.useState)(c),a=Object(l.a)(i,2),u=a[0],o=a[1],d=Object(r.useState)(!1),j=Object(l.a)(d,2),m=j[0],b=j[1],p=function(e,t){var n=function(e){return 0===e.trim().length}(t),r=n?"Field must not be empty":null;o((function(c){return Object(s.a)(Object(s.a)({},c),{},Object(V.a)({},e,{value:t,hasError:n,error:r}))}))},f=function(){var t,n,r,c=(null===(t=u.currentDump)||void 0===t?void 0:t.id)||null,i=(null===(n=u.summary)||void 0===n?void 0:n.value)||"",a=(null===(r=u.description)||void 0===r?void 0:r.value)||"";if(m){var l=function(e,t,n){return{id:e||Object(q.a)(),timestamp:Date.now(),summary:t.trim(),description:n,tags:[]}}(c,i,a);e.onSave(l),o((function(e){return Object(s.a)(Object(s.a)({},e),{},{summary:Object(s.a)(Object(s.a)({},e.summary),{},{value:l.summary}),description:Object(s.a)(Object(s.a)({},e.description),{},{value:l.description}),currentDump:l})}))}},h=(new ee).onSave(f).onCancel((function(){e.onCancel()})).build(),O=function(e){h(e)};return Object(r.useEffect)((function(){return document.addEventListener("keydown",O),function(){document.removeEventListener("keydown",O)}})),Object(r.useEffect)((function(){var e,t,n,r=null!==u.summary.value&&!u.summary.hasError,c=null!==u.description.value&&!u.description.hasError,i=(null===(e=u.summary.value)||void 0===e?void 0:e.trim())!==(null===(t=u.currentDump)||void 0===t?void 0:t.summary),a=u.description.value!==(null===(n=u.currentDump)||void 0===n?void 0:n.description);b(r&&c&&(i||a))}),[u]),Object(T.jsx)(T.Fragment,{children:Object(T.jsxs)("form",{className:e.className,noValidate:!0,autoComplete:"off",onSubmit:function(e){e.preventDefault()},children:[Object(T.jsx)("div",{children:Object(T.jsx)(K.a,{id:"summary",label:"Summary",variant:"outlined",value:u.summary.value||"",autoFocus:!0,onChange:function(e){return p("summary",e.target.value)},error:u.summary.hasError,helperText:u.summary.error})}),Object(T.jsx)("div",{children:Object(T.jsx)(K.a,{id:"description",label:"Description",variant:"outlined",value:u.description.value||"",multiline:!0,rows:12,onChange:function(e){return p("description",e.target.value)},error:u.description.hasError,helperText:u.description.error})}),Object(T.jsx)("div",{children:Object(T.jsx)(W.a,{disabled:!m,onClick:f,variant:"contained",color:"primary",size:"large",startIcon:Object(T.jsx)(G.a,{}),children:"Save"})})]})})}))($||($=Object(y.a)(["\n  div {\n    width: 100%;\n  }\n\n  > div {\n    margin: ",";\n  }\n\n  > div:last-child {\n    text-align: right;\n  }\n"])),(function(e){return e.theme.spacing(2,0,2)})));function ne(){var e=Object(u.f)(),t=Object(h.b)();return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("h2",{children:"Create new dump"}),Object(T.jsx)(te,{onSave:function(n){t(function(e){var t={type:m,dump:e};return function(e,n){e(t);var r=n();localStorage.setItem("dumps",JSON.stringify(r))}}(n)),e.push("/edit/dumps/".concat(n.id))},onCancel:function(){e.push("/")}})]})}var re,ce=n(161),ie=n(89),ae=Object(S.a)(Object(M.a)((function(e){var t=(new ee).onEdit(e.onEdit).build(),n=function(e){t(e)};return Object(r.useEffect)((function(){return document.addEventListener("keydown",n),function(){document.removeEventListener("keydown",n)}})),Object(T.jsxs)("div",{className:e.className,children:[Object(T.jsx)("h2",{children:e.dump.summary}),Object(T.jsx)(ie.a,{children:e.dump.description}),Object(T.jsx)("div",{children:Object(T.jsx)(W.a,{onClick:e.onEdit,variant:"contained",color:"primary",size:"large",startIcon:Object(T.jsx)(ce.a,{}),children:"Edit"})})]})}))(re||(re=Object(y.a)(["\n  > div:last-child {\n    text-align: right;\n  }\n"]))));function ue(){var e=Object(u.f)(),t=Object(u.g)(),n=v((function(e){return e.dumps.filter((function(e){return e.id===t.dumpId}))}));return Object(T.jsx)(T.Fragment,{children:1===n.length?Object(T.jsx)(ae,{dump:n[0],onEdit:function(){1===n.length&&e.push("/edit/dumps/".concat(n[0].id))}}):null})}var oe,se=n(162),le=n(163),de=Object(S.a)(Object(M.a)((function(e){var t=e.onClick||function(){};return Object(T.jsx)(se.a,{className:e.className,color:"primary","aria-label":"add",onClick:t,children:Object(T.jsx)(le.a,{})})}))(oe||(oe=Object(y.a)(["\n  position: fixed;\n  top: auto;\n  bottom: ","px;\n  left: auto;\n  right: 30px;\n"])),(function(e){return 30+70*(e.index||0)})));function je(){var e=Object(u.f)(),t=Object(u.g)(),n=v((function(e){return e.dumps.filter((function(e){return e.id===t.dumpId}))})),r=Object(h.b)();return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("h2",{children:"Edit Dump"}),1===n.length?Object(T.jsx)(te,{onSave:function(e){r(function(e){var t={type:b,dump:e};return function(e,n){e(t);var r=n();localStorage.setItem("dumps",JSON.stringify(r))}}(e))},onCancel:function(){e.push("/")},dump:n[0]}):null]})}function me(){return e=Object(T.jsx)(B.a,{maxWidth:"sm",children:Object(T.jsxs)(a.a,{basename:"/braindump-app",children:[Object(T.jsx)(R.a,{color:"inherit",component:a.b,to:"/",children:Object(T.jsx)("h1",{children:"Braindump"})}),Object(T.jsx)(a.b,{to:"/create",children:Object(T.jsx)(de,{})}),Object(T.jsxs)(u.c,{children:[Object(T.jsx)(u.a,{path:"/create",children:Object(T.jsx)(ne,{})}),Object(T.jsx)(u.a,{path:"/edit/dumps/:dumpId",children:Object(T.jsx)(je,{})}),Object(T.jsx)(u.a,{path:"/show/dumps/:dumpId",children:Object(T.jsx)(ue,{})}),Object(T.jsx)(u.a,{path:"/",children:Object(T.jsx)(A,{})})]})]})}),Object(T.jsxs)(r.StrictMode,{children:[Object(T.jsx)(U.a,{}),Object(T.jsx)(_.b,{injectFirst:!0,children:Object(T.jsx)(h.a,{store:O,children:e})})]});var e}var be;i.a.render(Object(T.jsx)(me,{}),document.getElementById("root")),be&&n.e(3).then(n.bind(null,174)).then((function(e){var t=e.getCLS,n=e.getFID,r=e.getFCP,c=e.getLCP,i=e.getTTFB;t(be),n(be),r(be),c(be),i(be)}))}},[[114,1,2]]]);
//# sourceMappingURL=main.a67266fb.chunk.js.map